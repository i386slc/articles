# Общий доступ к файлам: NFS, SMB и CIFS

{% hint style="info" %}
Ссылка на оригинальную статью: [File Sharing: NFS vs SMB vs CIFS](https://www.baeldung.com/cs/file-sharing-nfs-vs-smb-vs-cifs#nfs)

Опубликовано: 18 марта 2024

Автор: [Christian Jaimes](https://www.baeldung.com/cs/author/christianjaimes)

Редактор: [Grzegorz Piwowarek](https://www.baeldung.com/cs/editor/grzegorz-author)
{% endhint %}

## 1. Введение

**В этом уроке мы узнаем о протоколах обмена файлами**. В частности, **мы рассмотрим различия между протоколами NFS, SMB и CIFS**.

В отличие от других известных файловых протоколов, таких как [FTP](https://www.baeldung.com/java-ftp-client) и [HTTP](https://www.baeldung.com/cs/http-status-codes), **протоколы NFS, SMB и CIFS были разработаны для удобного обмена файлами и доступа к ним, как если бы каталоги и файлы были локальными для нашего компьютера**.

Распределенные файловые системы могут реализовывать любой из этих протоколов; поэтому мы посмотрим, как они работают, и сравним их различия.

## 2. Что такое распределенные файловые системы?

Файловые системы обеспечивают логическую основу для управления файлами. Например, **операционные системы реализуют файловые системы для организации, хранения и извлечения файлов на нашем локальном компьютере**. **Распределенные файловые системы**, с другой стороны, **реализуют ту же концепцию управления файлами, но на нескольких серверах, которые обмениваются данными по сети**.

Поскольку распределенные файловые системы обеспечивают удаленное совместное использование файлов и доступ к ним, для обеспечения этих возможностей были созданы такие протоколы, как NFS, SMB и CIFS. **Эти протоколы обмена файлами обеспечивают беспрепятственный доступ, как если бы пользователь перемещался по своей локальной системе** без типичной модели запрос-ответ. Стоит отметить, что эти протоколы оптимизированы для сетей LAN.

Далее мы узнаем, как работают эти протоколы, прежде чем выделить их различия.

## 3. NFS

**NFS (сетевая файловая система) — это протокол обмена файлами, который в основном используется в Unix-подобных операционных системах**. Этот протокол состоит из клиента и сервера NFS в качестве центрального хранилища файлов и каталогов.

Чтобы получить доступ к файлам с помощью NFS, клиент должен инициировать запрос на монтирование общих каталогов с сервера. Более того, **конфигурация сервера NFS определяет, какие каталоги доступны клиентам с соответствующими разрешениями**. Мы называем эти файлы общим ресурсом NFS. **После того как клиент смонтирует файловую систему, он сможет взаимодействовать с удаленными файлами**.

Выполнение файловых операций отправит запросы на сервер NFS. В результате при последующем доступе к файлам будет получена последняя версия. Тем не менее, NFS также предоставляет методы разрешения конфликтов, такие как блокировка файлов, чтобы предотвратить конфликты между одновременными клиентскими подключениями.

Наконец, когда клиенту больше не требуется доступ к общему ресурсу NFS, клиент автоматически размонтирует каталоги и отключается от сервера.

## 4. SMB

**В отличие от NFS, протокол SMB (Server Message Block) в основном используется в системах Windows**. Система аутентификации основана на пользователях. То есть IP-адрес клиента не предоставляет и не запрещает доступ, а учетные данные пользователя.

Чтобы читать файлы или записывать их с помощью SMB, сначала клиент устанавливает соединение с сервером. Затем все клиентские запросы к серверу указывают устройство и работу. Подобно NFS, протокол SMB поддерживает блокировку файлов, которая предотвращает повреждение файлов несколькими процессами.

Кроме того, **SMB обычно используется для совместного использования печати**. Другими словами, **протокол SMB позволяет использовать принтеры как сетевые ресурсы**. Это позволяет серверу SMB управлять заданиями печати и очередями между несколькими клиентами.

В SMB не существует концепции монтирования/размонтирования общих ресурсов; следовательно, пользователь может закрыть сеанс, как только ему больше не понадобится доступ к серверу.

## 5. CIFS

**CIFS (Common Internet File System) — это реализация протокола SMB**. Microsoft разработала CIFS исключительно на основе исходной версии SMB, называемой SMB1. Следовательно, более поздние версии SMB предоставляют больше возможностей и улучшений, чем реализация CIFS.

Когда Microsoft выпустила CIFS, некоторые из улучшений включали прямую связь клиент-сервер в обход NetBIOS. Кроме того, CIFS позволял использовать несколько подключений одного клиента к одному или нескольким серверам.

Поскольку CIFS больше не разрабатывается, в более поздних версиях SMB есть различные улучшения, которых нет в CIFS. Среди этих функций мы можем найти лучшую производительность, безопасность и шифрование, а также совместимость.

**В настоящее время CIFS по умолчанию отключен в современных системах Windows**.

## 6. Различия между NFS, SMB и CIFS

**Протоколы NFS, SMB и CIFS работают на уровне приложений сети с той же целью совместного использования ресурсов**. Однако их различия могут определить, какой из них наиболее подходит для нашего варианта использования. **В следующей таблице мы представляем некоторые из этих различий и возможностей**.

Имейте в виду, что в следующем содержимом таблицы показаны особенности текущих версий этих протоколов. Это NFSv4.2, SMB3.1.1 и SMB1 для NFS, SMB и CIFS соответственно:

<table><thead><tr><th width="218"></th><th>NFS</th><th>SMB</th><th>CIFS</th></tr></thead><tbody><tr><td>Окружение</td><td>Оптимизирован для Unix-подобных систем</td><td>Оптимизирован для систем Windows</td><td>Оптимизировано и поддерживает более старые системы Windows</td></tr><tr><td>Кроссплатформенность</td><td>Поддерживается</td><td>Поддерживается</td><td>Поддерживается</td></tr><tr><td>Аутентификация</td><td>Аутентификация на основе хоста и Kerberos</td><td>Аутентификация на основе пользователя и Kerberos</td><td>Аутентификация на основе пользователя</td></tr><tr><td>Шифрование</td><td>Не включено по умолчанию</td><td>AES включен по умолчанию</td><td>Не поддерживается</td></tr><tr><td>Блокировка файлов</td><td>Консультативная и обязательная блокировка, выполняемая NLM</td><td>Оппортунистическая блокировка (oplocks)</td><td>Оппортунистическая блокировка (oplocks)</td></tr><tr><td>Сетевые ресурсы</td><td>Совместное использование файлов и сетевые блокирующие устройства (NBD)</td><td>Совместное использование файлов и совместное использование печати</td><td>Совместное использование файлов и совместное использование печати</td></tr></tbody></table>

## 7. Заключение

В этой статье мы рассмотрели три сетевых протокола обмена файлами и их различия. Во-первых, мы определили распределенные файловые системы, что подняло вопрос о том, какой протокол более удобен для обмена файлами. Затем мы кратко рассмотрели протоколы NFS, SMB и CIFS, прежде чем выявить их различия.

Мы заметили, что CIFS является устаревшей реализацией SMB; поэтому NFS и SMB должны быть лучшими вариантами для рассмотрения. Тем не менее, мы выявили различия между этими протоколами в различных аспектах, таких как аутентификация, сетевые ресурсы, шифрование и многое другое.
